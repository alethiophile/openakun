<div class="vote" x-data="active_vote" db-id="{{ vote.db_id }}" @user-vote.window="handle_vote($event.detail)">
  <div class="vote-question">{{ vote.question }}</div>
  <div class="vote-entries">
    {%- for ve in vote.votes|sort(attribute='vote_count', reverse=True) -%}
      <div class="vote-entry{% if ve.user_voted %} voted-for{% endif %}" db-id="{{ ve.db_id }}"
           :class="{ 'voted-for': user_votes['{{ ve.db_id }}'] }"
           @click="toggle_vote({{ ve.db_id }})"><div class="vote-text">{{ ve.text }}</div>
        <div class="vote-count">{{ ve.vote_count }}</div>
        <div x-show="admin" class="delete-vote" title="Delete entry">âœ˜</div></div>
    {%- endfor -%}
  </div>
  <textarea x-ref="edit" class="vote-editor" rows="1" data-min-rows="1" @keydown.enter="submit_new($event)" placeholder="Custom vote"></textarea>
  <div class="submit-row"><button @click="submit_new()">Submit custom vote</button></div>
</div>
